

{% extends "base.html" %}
{% load static %}

{% block content %}

<!-- Main Article Container -->
<article class="main-article">

    <!-- Post Header -->
    <header class="article-header">
        <div class="article-meta">
            <!-- Category -->
            <a href="{% url "posts_by_category"  single_blog.category.id  %}" class="category-tag">{{ single_blog.category }}</a>
            <!-- Date -->
            <span class="read-time">{{ single_blog.created_at|date:"M d, Y" }}</span>
        </div>

        <!-- Post Title -->
        <h1>{{ single_blog.title }}</h1>

        <!-- Author Meta -->
        <div class="author-meta">
            <div class="author-details">
                <span class="author-name">By <!--{{ single_blog.author }}--> <span></span>ilmNote.</span>
            </div>
        </div>
    </header>

    <!-- Preview Image -->
    {% if single_blog.featured_image %}
    <div class="feature-image-wrapper">
        <img src="{{ single_blog.featured_image.url }}" alt="Blog Featured Image" class="feature-image">
    </div>
    {% endif %}

    <!-- Content Grid (Layouts Content Left, Sidebar Right) -->
    <div class="content-grid">

        <!-- Left Column: Post Content -->
        <div class="article-body">
            <!-- Short Description (Styled as lead text) -->
            <p class="lead-text">{{ single_blog.short_description }}</p>
            
            <!-- Main Body -->
            <div class="blog-text">
                {{ single_blog.blog_body|linebreaks }}
            </div>

             <section class="comments-section">
                <div class="comments-header">
                    <h3>Discussion ({{ comment_count }})</h3>
                </div>


                 <!--Comments Section-->
                <div class="comment-form-wrapper">
                    <form method="POST" action=""> 
                        {% csrf_token %}
                        <div class="form-group">
                            <textarea name="comment" class="aesthetic-input" placeholder="What are your thoughts?" rows="3" required></textarea>
                        </div>
                        <button type="submit" class="btn-comment">Post Comment</button>
                    </form>
                </div>

                <div class="comments-list">
                    {% for comment in comments %}
                    <div class="comment-card">
                        <div class="comment-avatar">
                            <span>{{ comment.user.username|slice:":1" }}</span>
                        </div>
                        <div class="comment-content">
                            <div class="comment-meta">
                                <span class="comment-author">{{ comment.user }}</span>
                                <span class="comment-date">{{ comment.created_at|date:"M d, Y" }}</span>
                            </div>
                            <p class="comment-text">{{ comment }}</p>
                        </div>
                    </div>
                    {% empty %}
                    <div class="no-comments">
                        <p>No comments yet. Be the first to share your thoughts!</p>
                    </div>
                    {% endfor %}
                </div>
            </section>


        </div>



        <!-- Right Column: Sidebar -->
        <aside class="sidebar">

            <!-- Categories Widget -->
            <div class="sidebar-widget">
                <h3>Categories</h3>
                <ul class="trending-list">
                    {% for cat in categories|slice:":6" %}
                    <li>
                        <span class="number">#</span>
                        <a href="{% url 'posts_by_category' cat.id %}">{{ cat.category_name }}</a>
                    </li>
                    {% endfor %}
                </ul>
            </div>


        </aside>

    </div>
</article>

{% endblock %}