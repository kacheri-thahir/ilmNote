
{% extends "base.html" %}

{% block content %}


{% for post in featured_posts %}
{% if forloop.first %}
<header class="hero"
style="background-image: linear-gradient(rgba(0,0,0,0.4), rgba(0,0,0,0.6)), url('{{ post.featured_image.url }}');">
        <div class="hero-content">
            <span class="tag">Featured Story</span>
            <h1> {{ post.title }} </h1>
            <p> {{ post.short_description }} </p>
            <a href="{% url "blogs" post.slug %}" class="read-more">Read Article &rarr;</a>
        </div>
    </header>
    {% endif %}
    {% endfor %}
    
    {% comment %} Featured Posts {% endcomment %}
    
    <main class="container">
        <div class="section-header">
            <h2>Featured Posts</h2>
            <div class="divider"></div>
        </div>
        
        <div class="blog-grid">
            {% for post in featured_posts %}
            {% if not forloop.first %}
            <article class="card">
                
                <div class="card-image">
                    {% if post.featured_image %}
                    <img src="{{ post.featured_image.url }}" alt="Blog featured image">
                    {% endif %}
                </div>
                
                <div class="card-content">
                    <span class="card-category">
                        <h3><a href="{% url "blogs" post.slug %}">{{ post.title }}</a></h3>
                    </span>
                    <h4><a href="{% url "blogs" post.slug %}"  style="color:black;">{{ post.short_description|truncatewords:10 }}</a></h4>
                    <p>{{ post.blog_body|truncatewords:10 }}</p>
                    
                    <div class="card-footer">
                        <span class="author">{{ post.author }}</span>
                        <span class="date">{{ post.created_at|timesince }} ago</span>
                    </div>
                </div>
                
                
            </article>
            {% endif %}
            {% endfor %}
        </div>  


{% comment %} Recent Articles {% endcomment %}

<div class="section-header">
    <h2>Recent Articles</h2>
    <div class="divider"></div>
</div>

<div class="blog-grid">
    {% for post in posts %}
    <article class="card">
        
        <div class="card-image">
            {% if post.featured_image %}
            <img src="{{ post.featured_image.url }}" alt="Blog featured image">
            {% endif %}
        </div>
        
        <div class="card-content">
            <span class="card-category">
                <h3><a href="{% url "blogs" post.slug %}">{{ post.title }}</a></h3>
            </span>
            <h4><a href="{% url "blogs" post.slug %}">{{ post.short_description|truncatewords:10 }}</a></h4>
            <p>{{ post.blog_body|truncatewords:15 }}</p>
            
            <div class="card-footer">
                <span class="author">{{ post.author }}</span>
                <span class="date">{{ post.created_at|timesince }} ago</span>
            </div>
        </div>
        
    </article>
    {% empty %}
    <p>No posts available.</p>
    {% endfor %}
</div>
</main>

{% endblock  %}